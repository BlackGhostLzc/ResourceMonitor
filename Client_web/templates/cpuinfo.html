<!DOCTYPE html>
<html>
<head>
    <title>CPU Information</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 15px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>CPU 信息</h1>
    <table>
        <tr>
            <th>属性</th>
            <th>值</th>
        </tr>
        <tr>
            <td>CPU 核心数</td>
            <td>{{ data.cpu_count }}</td>
        </tr>
        <tr>
            <td>CPU 使用率 (%)</td>
            <td>
                <ul>
                {% for percent in data.cpu_percent %}
                    <li>{{ percent }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
        <tr>
            <td>CPU 时间 (s)</td>
            <td>
                <ul>
                {% for time in data.cpu_times %}
                    <li>{{ time }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
        <tr>
            <td>CPU 频率 (MHz)</td>
            <td>
                <ul>
                {% for freq in data.cpu_freq %}
                    <li>{{ freq }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
        <tr>
            <td>CPU 统计</td>
            <td>
                <ul>
                {% for stat in data.cpu_stats %}
                    <li>{{ stat }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
    </table>

    <canvas id="myChart" width="200" height="200"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
    // 获取 Canvas 元素
    var data = {
        cpu_percent: [{{ data.cpu_percent|join(', ') }}] // 将服务器端的CPU使用率数据渲染为JavaScript数组
    };
    var ctx = document.getElementById('myChart').getContext('2d');
    // 创建柱状图
    var barChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['CPU0', 'CPU1', 'CPU2', 'CPU3', 'CPU4', 'CPU5', 'CPU6', 'CPU7'],
            datasets: [{
                label: 'Sales',
                data: data.cpu_percent,
                backgroundColor: 'rgba(54, 162, 235, 0.2)', // 设置背景颜色
                borderColor: 'rgba(54, 162, 235, 1)', // 设置边框颜色
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            },
            layout: {
                padding: {
                    top: 20, // 上边距
                    bottom: 20, // 下边距
                    left: 20, // 左边距
                    right: 20 // 右边距
                }
            }
        }
    });
    </script>

    <button onclick="location.href='/'" type="button">返回首页</button>

</body>
</html>
